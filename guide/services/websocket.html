<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <link rel="shortcut icon" href="logo-favicon.png"><meta name="theme-color" content="#D7A318"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>WebSocket | Hitrix - golang framework</title><meta name="description" content="Golang Framework for high traffic applications. Designed for speed up development time.">
    <link rel="preload" href="/hitrix/assets/js/runtime~app.7229c1cf.js" as="script"><link rel="preload" href="/hitrix/assets/css/styles.1ec23e2d.css" as="style"><link rel="preload" href="/hitrix/assets/js/8567.307c9fba.js" as="script"><link rel="preload" href="/hitrix/assets/js/app.b3be4a57.js" as="script">
    <link rel="stylesheet" href="/hitrix/assets/css/styles.1ec23e2d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/hitrix/" class=""><img class="logo" src="/hitrix/logo-favicon-90x90.png" alt="Hitrix - golang framework"><span class="site-name can-hide">Hitrix - golang framework</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/hitrix/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/hitrix/roadmap/" class="nav-link" aria-label="Roadmap"><!--[--><!--]--> Roadmap <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/hitrix/rules/" class="nav-link" aria-label="CoreTrix Rules"><!--[--><!--]--> CoreTrix Rules <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/coretrix/hitrix" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search..." autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/hitrix/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/hitrix/roadmap/" class="nav-link" aria-label="Roadmap"><!--[--><!--]--> Roadmap <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/hitrix/rules/" class="nav-link" aria-label="CoreTrix Rules"><!--[--><!--]--> CoreTrix Rules <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/coretrix/hitrix" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Guide</p><ul class=""><li><!--[--><a href="/hitrix/" class="nav-link sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><p class="sidebar-item active">Services</p><ul class="sidebar-sub-items"><li><!--[--><a href="/hitrix/guide/services/app" class="nav-link sidebar-item" aria-label="App"><!--[--><!--]--> App <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/config" class="nav-link sidebar-item" aria-label="Config"><!--[--><!--]--> Config <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/orm_engine" class="nav-link sidebar-item" aria-label="ORM Engine"><!--[--><!--]--> ORM Engine <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/orm_engine_context" class="nav-link sidebar-item" aria-label="ORM Engine Context"><!--[--><!--]--> ORM Engine Context <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/oss" class="nav-link sidebar-item" aria-label="OSS"><!--[--><!--]--> OSS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/api_logger" class="nav-link sidebar-item" aria-label="API Logger"><!--[--><!--]--> API Logger <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/authentication" class="nav-link sidebar-item" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/clock" class="nav-link sidebar-item" aria-label="Clock"><!--[--><!--]--> Clock <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/checkout" class="nav-link sidebar-item" aria-label="Checkout"><!--[--><!--]--> Checkout <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/crud" class="nav-link sidebar-item" aria-label="CRUD"><!--[--><!--]--> CRUD <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/ddos" class="nav-link sidebar-item" aria-label="DDOS"><!--[--><!--]--> DDOS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/dynamic_link" class="nav-link sidebar-item" aria-label="Dynamic link"><!--[--><!--]--> Dynamic link <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/elorus" class="nav-link sidebar-item" aria-label="Elorus - Invoice manager"><!--[--><!--]--> Elorus - Invoice manager <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/error_logger" class="nav-link sidebar-item" aria-label="Error logger"><!--[--><!--]--> Error logger <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/fcm" class="nav-link sidebar-item" aria-label="Firebase cloud messaging"><!--[--><!--]--> Firebase cloud messaging <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/file_extractor" class="nav-link sidebar-item" aria-label="File extractor"><!--[--><!--]--> File extractor <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/localizer" class="nav-link sidebar-item" aria-label="Localizer"><!--[--><!--]--> Localizer <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/google_analytics" class="nav-link sidebar-item" aria-label="Google Analytics"><!--[--><!--]--> Google Analytics <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/mail" class="nav-link sidebar-item" aria-label="Transactional email sender"><!--[--><!--]--> Transactional email sender <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/jwt" class="nav-link sidebar-item" aria-label="JWT"><!--[--><!--]--> JWT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/otp" class="nav-link sidebar-item" aria-label="OTP"><!--[--><!--]--> OTP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/password" class="nav-link sidebar-item" aria-label="Password"><!--[--><!--]--> Password <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/html2pdf" class="nav-link sidebar-item" aria-label="HTML2PDF"><!--[--><!--]--> HTML2PDF <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/slack" class="nav-link sidebar-item" aria-label="Slack"><!--[--><!--]--> Slack <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/sms" class="nav-link sidebar-item" aria-label="SMS"><!--[--><!--]--> SMS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/setting" class="nav-link sidebar-item" aria-label="Setting"><!--[--><!--]--> Setting <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/stripe" class="nav-link sidebar-item" aria-label="Stripe"><!--[--><!--]--> Stripe <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/uploader" class="nav-link sidebar-item" aria-label="Uploader"><!--[--><!--]--> Uploader <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/websocket" class="nav-link router-link-active sidebar-item active" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/exporter" class="nav-link sidebar-item" aria-label="Exporter"><!--[--><!--]--> Exporter <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/feature_flag" class="nav-link sidebar-item" aria-label="Feature flags"><!--[--><!--]--> Feature flags <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/clockwork" class="nav-link sidebar-item" aria-label="ClockWork"><!--[--><!--]--> ClockWork <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/kubernetes" class="nav-link sidebar-item" aria-label="Kubernetes"><!--[--><!--]--> Kubernetes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/template" class="nav-link sidebar-item" aria-label="Template"><!--[--><!--]--> Template <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/gql" class="nav-link sidebar-item" aria-label="Gql"><!--[--><!--]--> Gql <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/services/request_logger" class="nav-link sidebar-item" aria-label="Request Logger"><!--[--><!--]--> Request Logger <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><p class="sidebar-item">Features</p><ul class="sidebar-sub-items"><li><!--[--><a href="/hitrix/guide/features/flags" class="nav-link sidebar-item" aria-label="Flags"><!--[--><!--]--> Flags <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/script" class="nav-link sidebar-item" aria-label="Background scripts"><!--[--><!--]--> Background scripts <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/seeder" class="nav-link sidebar-item" aria-label="Seeder"><!--[--><!--]--> Seeder <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/validator" class="nav-link sidebar-item" aria-label="Validator"><!--[--><!--]--> Validator <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/pagination" class="nav-link sidebar-item" aria-label="Pagination"><!--[--><!--]--> Pagination <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/test" class="nav-link sidebar-item" aria-label="Integration test"><!--[--><!--]--> Integration test <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/helper" class="nav-link sidebar-item" aria-label="Helper"><!--[--><!--]--> Helper <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/goroutine" class="nav-link sidebar-item" aria-label="Goroutine"><!--[--><!--]--> Goroutine <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/hitrix/guide/features/upload_files" class="nav-link sidebar-item" aria-label="Upload files"><!--[--><!--]--> Upload files <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><p class="sidebar-item">GraphQL</p><ul class="sidebar-sub-items"><li><!--[--><a href="/hitrix/guide/graphql/dataloaders" class="nav-link sidebar-item" aria-label="Dataloaders"><!--[--><!--]--> Dataloaders <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> WebSocket</h1><p>This service add support of websockets. It manage the connections and provide you easy way to read and write messages</p><p>Register the service into your <code>main.go</code> file:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>registry<span class="token punctuation">.</span><span class="token function">ServiceProviderSocketRegistry</span><span class="token punctuation">(</span>registerHandler<span class="token punctuation">,</span> unregisterHandler <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token operator">*</span>socket<span class="token punctuation">.</span>Socket<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Access the service:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>service<span class="token punctuation">.</span><span class="token function">DI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SocketRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To be able to handle new connections you should create your own route and create a handler for it. Your handler should looks like that:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> WebsocketController <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>controller <span class="token operator">*</span>WebsocketController<span class="token punctuation">)</span> <span class="token function">InitConnection</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	ws<span class="token punctuation">,</span> err <span class="token operator">:=</span> upgrader<span class="token punctuation">.</span><span class="token function">Upgrade</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> c<span class="token punctuation">.</span>Request<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	socketRegistryService<span class="token punctuation">,</span> has <span class="token operator">:=</span> service<span class="token punctuation">.</span><span class="token function">DI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SocketRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token operator">!</span>has <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;Socket Registry is not registered&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	errorLoggerService <span class="token operator">:=</span> service<span class="token punctuation">.</span><span class="token function">DI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ErrorLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	connection <span class="token operator">:=</span> <span class="token operator">&amp;</span>socket<span class="token punctuation">.</span>Connection<span class="token punctuation">{</span>Send<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Ws<span class="token punctuation">:</span> ws<span class="token punctuation">}</span>
	socketHolder <span class="token operator">:=</span> <span class="token operator">&amp;</span>socket<span class="token punctuation">.</span>Socket<span class="token punctuation">{</span>
		ErrorLogger<span class="token punctuation">:</span> errorLoggerService<span class="token punctuation">,</span>
		Connection<span class="token punctuation">:</span>  connection<span class="token punctuation">,</span>
		ID<span class="token punctuation">:</span>          <span class="token string">&quot;unique connection hash based on userID, deviceID and timestamp&quot;</span><span class="token punctuation">,</span>
		Namespace<span class="token punctuation">:</span>   model<span class="token punctuation">.</span>DefaultNamespace<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	socketRegistryService<span class="token punctuation">.</span>Register <span class="token operator">&lt;-</span> socketHolder

	<span class="token keyword">go</span> socketHolder<span class="token punctuation">.</span><span class="token function">WritePump</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> socketHolder<span class="token punctuation">.</span><span class="token function">ReadPump</span><span class="token punctuation">(</span>socketRegistryService<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>rawData <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> socketRegistryService<span class="token punctuation">.</span>Sockets<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>socketHolder<span class="token punctuation">.</span>ID<span class="token punctuation">)</span>
		
        dto <span class="token operator">:=</span> <span class="token operator">&amp;</span>DTOMessage<span class="token punctuation">{</span><span class="token punctuation">}</span>
        err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>rawData<span class="token punctuation">,</span> dto<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            errorLoggerService<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            retrun
        <span class="token punctuation">}</span>
        <span class="token comment">//handle business logic here</span>
        s<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>socket<span class="token punctuation">.</span>Socket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Emit</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>This handler initializes the new coming connections and have 2 go routines - one for writing messages and the second one for reading messages If you want to send message you should use <code>socketRegistryService.Emit</code></p><p>If you want to read coming messages you should do it in the function we are passing as second parameter of <code>ReadPump</code> method</p><p>If you want to select certain connection you can do it by the ID and this method</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>s<span class="token punctuation">,</span> err <span class="token operator">:=</span> socketRegistryService<span class="token punctuation">.</span>Sockets<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>ID<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Also websocket service provide you hooks for registering new connections and for unregistering already existing connections. You can define those handlers when you register the service based on namespace of socket.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/coretrix/hitrix/edit/main/docs/docs/guide/services/websocket.md" rel="noopener noreferrer" target="_blank" aria-label><!--[--><!--]-->  <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">10/22/2021, 3:42:43 PM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: a.shumansky@gmail.com">Anton</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: krasimir.ivanov@coretrix.com">Krasimir Ivanov</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/hitrix/assets/js/runtime~app.7229c1cf.js" defer></script><script src="/hitrix/assets/js/8567.307c9fba.js" defer></script><script src="/hitrix/assets/js/app.b3be4a57.js" defer></script>
  </body>
</html>

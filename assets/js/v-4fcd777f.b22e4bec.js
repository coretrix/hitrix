"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9459],{9869:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-4fcd777f",path:"/guide/services/clockwork.html",title:"ClockWork",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"guide/services/clockwork.md",git:{updatedTime:1644306561e3,contributors:[{name:"Anton",email:"a.shumansky@gmail.com",commits:3}]}}},4871:(n,s,a)=>{a.r(s),a.d(s,{default:()=>h});var e=a(6252);const o=(0,e._)("h1",{id:"clockwork",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#clockwork","aria-hidden":"true"},"#"),(0,e.Uk)(" ClockWork")],-1),t=(0,e._)("p",null,"This service provides you information about all queries executed by ORM and performance metrics for every api request. Also gives you ability to set your own log data. All the information it will be visible into your chrome inspector.",-1),l=(0,e.Uk)("It requires installation of Clockwork Chrome extension "),p={href:"https://chrome.google.com/webstore/detail/clockwork/dmggabnehkmmfmdffgajcflpdjlnoemp",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Uk)("ClockWork extension"),r=(0,e.Uk)("You need to add special header to activate this feature. My recommendation is to install also this extension "),i={href:"https://chrome.google.com/webstore/detail/modheader/idgpnmonknjnojddfkpgkljpfnnfcklj",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Uk)("ModHeader extension"),k=(0,e.Uk)(" You should set header "),d=(0,e._)("code",null,"CoreTrix",-1),g=(0,e.Uk)(" with value equal to the password you will set bellow in your yaml file"),m=(0,e.uE)('<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">clockwork</span><span class="token punctuation">:</span>\n    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;your password here&quot;</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Register the service into your <code>main.go</code> file as context service:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>registry<span class="token punctuation">.</span><span class="token function">ServiceProviderClockWorkForContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Access the service:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>service<span class="token punctuation">.</span><span class="token function">DI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ClockWorkForContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetLoggerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>There are 2 steps that also needs to be done:</p><ol><li>To add this middleware</li></ol><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>\thitrixMiddleware <span class="token string">&quot;github.com/coretrix/hitrix/pkg/middleware&quot;</span>\n\t\n\t<span class="token operator">...</span>\n\t\n\thitrixMiddleware<span class="token punctuation">.</span><span class="token function">Clockwork</span><span class="token punctuation">(</span>ginEngine<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>To add special route</li></ol><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>\thitrixController <span class="token string">&quot;github.com/coretrix/hitrix/pkg/controller&quot;</span>\n\n    <span class="token operator">...</span>\n\n\t<span class="token keyword">var</span> clockwork <span class="token operator">*</span>hitrixController<span class="token punctuation">.</span>ClockworkController\n\tginEngine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/__clockwork/:id&quot;</span><span class="token punctuation">,</span> clockwork<span class="token punctuation">.</span>GetIndexAction<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>You also are able to send your own data to clockwork and use it as a logger to debug easily. You can do it in that way anywhere in your code:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>\tservice<span class="token punctuation">.</span><span class="token function">DI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ClockWorkForContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetLoggerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">LogDebugString</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',12),b={},h=(0,a(3744).Z)(b,[["render",function(n,s){const a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[o,t,(0,e._)("p",null,[l,(0,e._)("a",p,[c,(0,e.Wm)(a)])]),(0,e._)("p",null,[r,(0,e._)("a",i,[u,(0,e.Wm)(a)]),k,d,g]),m],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,e]of s)n[a]=e;return n}}}]);